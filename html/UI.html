<html>
    <head>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width">
        <link href="style.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
        <style>
			 #depositUI, #withdrawUI, #transferUI, #general, #topbar, #dostawaUI, #paczkiUI, #waiting
			 {display: none;}
		</style>
	</head>
    <body>
    	<div class="container" style="position: fixed; top: 10%; left: 26%;">
    		<div id="result"></div>
    		<div class="topbar" id="topbar">
    			<div class="cont-p-1">
    				<div class="parale-1 "></div>
    			</div>
    			<div class="cont-p-2">
    				<div class="parale-2"></div>
    			</div>
    			<div class="cont-p-3">
    				<div class="parale-3"></div>
    			</div>
    			<nav>
    				<div class="logo-topbar"></div>
    				<button class="btn-sign-out">Wyjdź<i class="fas fa-sign-out-alt"></i></button>
    			</nav> 
    		</div>
			<!-- ########### GENERAL ###########  -->
    		<div class="cont-content" id="general">
    			<div class="flex">
    				<div class="balance box-shadow">
	    				<p>Witamy<br>
	    					<span class="name"><span class="username1"></span></span><br>
	    					Paczkomat<br>
	    					<span class="money"><span class="curbalance" id="chuj_ci_w_dupe"></span><span class="dollars"></span></span>
	    				</p>
		    		</div>
		    		<div class="list-btn">
		    			<button class="btn btn-blue" id="deposit" style="padding-top: 8%;">
		    				<i class="fas fa-box-open"></i>
		    				<span class="far fas fa-box-open icon"></span>
		    				<p>Odbierz<br>
		    				<span>Odbierz paczkę</span></p>
		    			</button>
			    		<button class="btn btn-violet" id="withdraw" style="padding-top: 8%;">
			    			<i class="fas fa-paper-plane"></i>
		    				<span class="fas fa-paper-plane icon"></span>
		    				<p>Nadaj<br>
		    				<span>Nadaj paczkę</span></p>
			    		</button>
			    		<button class="btn btn-orange" id="transfer" style="padding-top: 8%;">
			    			<i class="fas fa-map-marker-alt"></i>
		    				<span class="fas fa-map-marker-alt icon"></span>
		    				<p>Sledź<br>
		    				<span>Śledź paczkę</span></p>
			    		</button>
		    		</div>
    			</div>
    			<div class="flex">
    				<div class="pub box-shadow confiance">
    					<p>
    						<span>GOPOSTAL</span><br>
    						Jeżeli jest coś co moglibyśmy popawić w naszej usłudze, daj nam znać 6-282-2502
    					</p>
    					<div class="circle-confiance"></div>
    				</div>
    				<div class="pub box-shadow social">
    					<p>SSocial Media</p>
    					<ul class="graph">
    						<li class="facebook"><i class="fab fa-facebook-f"></i></li>
    						<li class="google"><i class="fab fa-google-plus-g"></i></li>
    						<li class="rss"><i class="fas fa-rss"></i></li>
    						<li class="twitter"><i class="fab fa-twitter"></i></li>
    						<li class="insta"><i class="fab fa-instagram"></i></li>
    					</ul>
    				</div>
    			</div>
	    	</div>
<!-- ########### DEPOSER ###########  -->
	    	<div class="cont-content" id="depositUI">
    			<div class="flex">
    				<div class="btn btn-blue banniere">
    					<p>Odbierz swoją paczkę<br>
		    			<span>Najbardziej wybierana usługa kurierska w Los Santos!</span></p>
    				</div>
    				<button class="btn btn-grey back" style="padding-top: 3%;">
    					<i class="fas fa-bars"></i>
	    				<span class="fas fa-arrow-left icon"></span>
	    				<p>Wróć<br>
	    				<span>Do głównego menu</span></p>
    				</button>
    			</div>
    			<form id="deposit1">
    				<div class="input-cont box-shadow">
    					<label>Podaj kod odbioru paczki</label>
    					<input id="amount" type="number" placeholder="Kod odbioru paczki">
    				</div>
    				<button class="btn btn-green" type="submit" style="padding-top: 3%;">
    					<i class="fas fa-check"></i>
	    				<span class="fas fa-check icon"></span>
	    				<p>Potwierdź<br>
	    				<span>Kod odbioru</span></p>
    				</button>
				</form>
	    	</div>
			
			<!-- Paczki -->
			<div class="cont-content" id="paczkiUI">
				<div style="height: 80%; overflow: auto;" id="paczki">
					
				</div>
				<div style="height: 5%;"></div>
				<div class="flex">
    				<button class="btn btn-grey back" style="padding-top: 3%;">
    					<i class="fas fa-bars"></i>
	    				<span class="fas fa-arrow-left icon"></span>
	    				<p>Wróć<br>
	    				<span>Do głównego menu</span></p>
    				</button>
    			</div>
	    	</div>
			
			<div class="cont-content" id="dostawaUI">
				<div class="flex">
    				<div class="balance curve box-shadow">
	    				<p>Paczka<br>
	    					<span class="name">
								<i class="fas fa-box-open icon"></i><span id="paczusia_name"></span>
							</span><br>
	    					Paczkomat<br>
	    					<span class="money">
								<span class="paczkomat_paczka"></span>
							</span>
	    				</p>
		    		</div>
					
					<div class="pub box-shadow confiance" style='display: flex; justify-content: space-between;'>
						
						<span style='text-transform: uppercase; font-size: 16px; color: #181818; font-family: "vision-heavy",sans-serif; margin: 25px 0 0 20px;'>status dostawy</span>
						<p id="status_paczusi"></p>
    				</div>
					
    			</div>
				
				<div style="height: 5%;"></div>
				
				<div class="flex">
    				<!-- <div class="btn btn-blue banniere">
    					<p>Odbierz swoją paczkę<br>
		    			<span>Najbardziej wybierana usługa kurierska w Los Santos!</span></p>
    				</div> -->
    				<button class="btn btn-grey back" style="padding-top: 3%;">
    					<i class="fas fa-bars"></i>
	    				<span class="fas fa-arrow-left icon"></span>
	    				<p>Wróć<br>
	    				<span>Do głównego menu</span></p>
    				</button>
					<div style="width: 25%; display: flex; justify-content: space-between;"></div>
					<div class="pub box-shadow confiance" style='display: flex; justify-content: space-between;' id="code_bkg">
						
						<span style='text-transform: uppercase; font-size: 16px; color: #181818; font-family: "vision-heavy",sans-serif; margin: 25px 0 0 20px;'>kod odbioru</span>
						
						<p style="font-size: 60px; color: #28903a; font-family: 'vision-heavy', sans-serif;" id="paczusia_code">
							
						</p>
    				</div>
    			</div>
	    	</div>
<!-- ########### RETIRER ###########  -->
	    	<div class="cont-content" id="withdrawUI">
    			<div class="flex">
    				<div class="btn btn-violet banniere">
    					<p>Przesyłka<br>
		    			<span>Nie ma nadal numeru telefonu, zrób to teraz!</span></p>
    				</div>
    				<button class="btn btn-grey back" style="padding-top: 3%;">
    					<i class="fas fa-bars"></i>
	    				<span class="fas fa-arrow-left icon"></span>
	    				<p>Wróć<br>
	    				<span>Do menu</span></p>
    				</button>
    			</div>
    			<form id="withdraw1">
    				<div class="input-cont box-shadow">
    					<label>Numer telefonu odbiorcy</label>
    					<input id="amountw" placeholder="Numer telefonu odbiorcy">
    				</div>
    				<button class="btn btn-green" type="submit" id="potwierdz_wysylka" style="padding-top: 3%;">
    					<i class="fas fa-check"></i>
	    				<span class="fas fa-check icon"></span>
	    				<p>Potwierdź<br>
	    				<span>Nadanie na numer telefonu</span></p>
    				</button>
				</form>
	    	</div>
<!-- ########### VIREMENT ###########  -->
	    	<div class="cont-content" id="transferUI">
    			<div class="flex">
    				<div class="btn btn-orange banniere">
    					<p>Transfer your money<br>
		    			<span>To a person</span></p>
    				</div>
    				<button class="btn btn-grey back" style="padding-top: 3%;">
    					<i class="fas fa-bars"></i>
	    				<span class="fas fa-arrow-left icon"></span>
	    				<p>Back<br>
	    				<span>To the main menu</span></p>
    				</button>
    			</div>
    			<form id="transfer1">
    				<div class="double-input">
    					<div class="input-cont box-shadow">
	    					<label>How much would you like to transfer ?</label>
	    					<input id="amountt" type="number" placeholder="0 $">
	    				</div>
	    				<div class="input-cont box-shadow">
	    					<label>To who would you like to transfer ?</label>
	    					<input id="to" type="text" placeholder="First and Lastname">
	    				</div>
    				</div>
    				<button class="btn btn-green" type="submit" style="padding-top: 3%;">
    					<i class="fas fa-check"></i>
	    				<span class="fas fa-check icon"></span>
	    				<p>Confirm<br>
	    				<span>Your bank transfer</span></p>
    				</button>
				</form>
	    	</div>
<!-- ########### WAITING ###########  -->
	    	<div class="cont-waiting" id="waiting">
	    		<div class="content-waiting">
    				<div class="mainlogo"></div>
    				<p><span>Please</span> confirm it<br>
    				with <span>your</span>  Fingerprint</p>
    				<div id="fingerprint-content">
    					<div class="fingerprint-default"></div>
    					<div class="fingerprint-active"></div>
    					<div class="fingerprint-bar"></div>
    				</div>
    			</div>
    			<div class="bg-waiting">
    				<div class="cont-p-4">
    					<div class="parale-4"></div>
    				</div>
    				<div class="cont-p-5">
    					<div class="parale-5"></div>
    				</div>
    				<div class="cont-p-6">
    					<div class="parale-6"></div>
    				</div>
    				<div class="cont-p-7">
    					<div class="parale-7"></div>
    				</div>
    			</div>
	    	</div>
    	</div>
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    	<script src="nui://game/ui/jquery.js" type="text/javascript"></script>
    	<script type="text/javascript">
    		var lastPackage = 0
			var lastPaczkomat = ''
			
			function openPackage(code, state, paczkomat, name) {
				$('#depositUI, #withdrawUI, #transferUI, #paczkiUI').hide();
				$('#status_paczusi').hide();
				$('.paczkomat_paczka').hide();
				$('#code_bkg').hide();
				$('#paczusia_code').hide();
				$('#dostawaUI').show();
				
				if (paczkomat != 'undefined') {
					$('.paczkomat_paczka').html(paczkomat);
					$('.paczkomat_paczka').show();
				} else {
					$('.paczkomat_paczka').hide();
				}
				
				$('#paczusia_name').html(name);
				
				if (state == 0) {
					$('#status_paczusi').html('Paczka oczekuja na nadanie');
					$('#status_paczusi').show();
				} else if (state == 1) {
					$('#status_paczusi').html('Paczka przyjęta w sortowni');
					$('#status_paczusi').show();
				} else if (state == 2) {
					$('#status_paczusi').html('Paczka została umieszczona w paczkomacie');
					$('#status_paczusi').show();
				} else if (state == 3) {
					$('#status_paczusi').html('Paczka została odebrana z paczkomatu');
					$('#status_paczusi').show();
				}
				
				if (code != 0) {
					$('#paczusia_code').html(code);
					$('#paczusia_code').show();
					$('#code_bkg').show();
				} else if(code == 0) {
					$('#code_bkg').hide();
					$('#paczusia_code').hide();
				}
			}
			
			function sendPackage(id, number) {
				lastPackage = id
				if (number == 0) {
					$('#depositUI, #withdrawUI, #transferUI, #paczkiUI').hide();
					$('#withdrawUI').show()
				} else {
					$('#general, #waiting, #transferUI, #withdrawUI, #depositUI, #paczkiUI, #dostawaUI, #topbar').hide();
					$('body').removeClass("active");
					$('#paczki').empty();
					$.post('http://m_packages/send_paczka', JSON.stringify({telefon: number, id: lastPackage, zone: lastPaczkomat}));
					$.post('http://m_packages/NUIFocusOff', JSON.stringify({}));
				}
			}
			
			$('#potwierdz_wysylka').click(function(){
	            $('#general, #waiting, #transferUI, #withdrawUI, #depositUI, #paczkiUI, #dostawaUI, #topbar').hide();
	            $('body').removeClass("active");
				$('#paczki').empty();
	            $.post('http://m_packages/send_paczka', JSON.stringify({telefon: $("#amountw").val(), id: lastPackage, zone: lastPaczkomat}));
				$.post('http://m_packages/NUIFocusOff', JSON.stringify({}));
	        })
			
			$(function() {
				window.addEventListener('message', function(event) {
					if (event.data.type === "openGeneral") {
						$('#paczki').empty();
		                /*$('#waiting').show();*/
						$('#general').css('display', 'block')
						$('#topbar').css('display', 'flex')
						$('#waiting').css('display', 'none')
		                $('body').addClass("active");
						$('.curbalance').html(event.data.paczkomat);
						lastPaczkomat = event.data.paczkomat
					} else if(event.data.type === "nazwa") {
							$('.username1').html(event.data.player);
					} else if(event.data.type === "paczki") {
						let argumenty = "" + event.data.code + ", " + event.data.state + ", '" + event.data.paczkomat + "', '" + event.data.name + "'"
						$('#paczki').append('<button class="btn btn-violet banniere" onclick="openPackage(' + argumenty + ')" style="padding-top: 3%;"> <i class="far fas fa-box-open"></i> <p><span class="far fas fa-box-open icon"></span>' + event.data.name + '<br> </button>');
						$('#paczki').append('<div style="height: 5%;"></div>');
					} else if(event.data.type === "send_paczki") {
						let argumenty = "" + event.data.id + ", '" + event.data.number + "'"
						$('#paczki').append('<button class="btn btn-violet banniere" onclick="sendPackage(' + argumenty + ')" style="padding-top: 3%;"> <i class="far fas fa-box-open"></i> <p><span class="far fas fa-box-open icon"></span>' + event.data.name + '<br> </button>');
						$('#paczki').append('<div style="height: 5%;"></div>');
					} else if (event.data.type === "closeAll"){
		                $('#waiting, #general, #transferUI, #withdrawUI, #depositUI, #dostawaUI, #topbar').hide();
		                $('body').removeClass("active");
					}
					else if (event.data.type === "result") {
						if (event.data.t == "success")
							$("#result").attr('class', 'alert-green');
						else
							$("#result").attr('class', 'alert-orange');
						$("#result").html(event.data.m).show().delay(5000).fadeOut();
					}
				});
			});
			/*$( document ).ready(function() {
				$('#waiting').show();
		        $('body').addClass("active");
			});*/
    		$('.btn-sign-out').click(function(){
	            $('#general, #waiting, #transferUI, #withdrawUI, #depositUI, #paczkiUI, #dostawaUI, #topbar').hide();
	            $('body').removeClass("active");
				$('#paczki').empty();
	            $.post('http://m_packages/NUIFocusOff', JSON.stringify({}));
	        })
	        $('.back').click(function(){
	            $('#depositUI, #withdrawUI, #transferUI, #dostawaUI, #paczkiUI').hide();
				$('#paczki').empty();
	            $('#general').show();
	        })
	        $('#deposit').click(function(){
	            $('#general').hide();
	            $('#depositUI').show();
	        })
	        $('#withdraw').click(function(){
				$.post('http://m_packages/send_paczki', JSON.stringify({}));
	            $('#general').hide();
	            $('#paczkiUI').show();
	        })
	        $('#transfer').click(function(){
				$('#general').hide();
	            $('#paczkiUI').show();
				$.post('http://m_packages/paczki', JSON.stringify({}));
	        })
	        $('#fingerprint-content').click(function(){
	            $('.fingerprint-active, .fingerprint-bar').addClass("active")
	            setTimeout(function(){
		  		$('#general').css('display', 'block')
					$('#topbar').css('display', 'flex')
					$('#waiting').css('display', 'none')
					$('.fingerprint-active, .fingerprint-bar').removeClass("active")
				}, 1400);
	        })
	        $("#deposit1").submit(function(e) {
		        e.preventDefault(); // Prevent form from submitting
		        $.post('http://m_packages/odbierz', JSON.stringify({
		            kod: $("#amount").val(),
					zone: lastPaczkomat
		        }));
				$('#depositUI').hide();
				$('#general').show();
				$("#amount").val('');
			});
			$("#transfer1").submit(function(e) {
		        e.preventDefault(); // Prevent form from submitting
		        $.post('http://m_packages/transfer', JSON.stringify({
					to: $("#to").val(),
		            amountt: $("#amountt").val()
		        }));
				$('#transferUI').hide();
				$('#general').show();
				$("#amountt").val('');
			});
			/*$("#withdraw1").submit(function(e) {
				e.preventDefault(); // Prevent form from submitting
		        $.post('http://m_packages/withdrawl', JSON.stringify({
		            amountw: $("#amountw").val()
		        }));
				$('#withdrawUI').hide();
				$('#general').show();
				$("#amountw").val('');
			});*/
			document.onkeyup = function(data){
		        if (data.which == 27){
		            $('#general, #waiting, #transferUI, #withdrawUI, #depositUI, #paczkiUI, #topbar').hide();
		            $('body').removeClass("active");
					$('#paczki').empty();
		            $.post('http://m_packages/NUIFocusOff', JSON.stringify({}));
		        }
		    }
    	</script>
    </body>
  </html>
